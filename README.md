# [123云盘](https://www.123pan.com) 无限制分享工具

- 欢迎提 Pull Requests 和 功能建议 和 **详细的可复现的** Bug 反馈。

- **2025-07-09**：担心网盘容量不够、保存不了这么多资源？请看新项目，直接把本项目的数据库挂载成 WebDAV 使用，不需要您手动保存任何文件到你的网盘里：[>>> 点我访问 <<<](https://github.com/realcwj/123Pan-Unlimited-WebDAV)

- **2025-06-15**：实验性版本及对应的油猴脚本已更新，抢先体验：[>>> 点我访问 <<<](https://pan.whose.icu/)

- **2025-05-31**：自己部署/源代码已发布：[Release: v2-alpha](https://github.com/realcwj/123Pan-Unlimited-Share/releases/tag/v2-alpha)

## 使用协议与免责声明 (Terms of Use & Disclaimer)

**在使用本软件前，请务必仔细阅读并理解以下所有条款。任何下载、安装、使用、修改本软件源码或其衍生品的行为，均将被视为您已无条件接受本协议所有条款。若您不同意任何一条款，请立即停止使用并删除本软件。**

**[In English] Before using this software, you must read and understand all the following terms. Any act of downloading, installing, using, or modifying this software or its derivatives will be deemed as your unconditional acceptance of this entire agreement. If you do not agree with any of the terms, please cease use and delete the software immediately.**

1. 本项目（下称“本软件”）的创建初衷仅为技术学习与研究，旨在探讨和理解云存储服务中“秒传”功能的技术实现原理、以及基于Flask的Python后端开发技术。除此之外，**严禁将本软件用于任何非法用途**。
2. 您必须充分认识到，利用本软件的功能绕过网络服务平台的安全与审核机制，可能涉嫌违反《中华人民共和国网络安全法》、《网络信息内容生态治理规定》等多项法律法规，并可能需要承担严重的法律后果。
3. **网络空间并非法外之地。** 任何利用本软件传播、分享、贩卖色情、暴力、赌博、恐怖主义、危害国家安全或违背社会主义核心价值观等违法违规内容的行为，均与本软件开发者无关。开发者坚决反对并谴责任何此类非法使用行为。
4. 用户不得利用本软件（包括但不限于其源码、二进制文件、衍生作品或生成的Hash信息）从事以下行为：
   - 规避、破解、攻击或以任何方式干扰任何网络服务平台的安全措施、技术壁垒或内容审查系统。
   - 上传、下载、存储、分享或传播任何违反用户所在国家/地区及中华人民共和国法律法规的内容，包括但不限于：
     * 色情、淫秽、暴力、赌博、恐怖主义内容；
     * 危害国家安全、破坏社会稳定、损害公共利益的内容；
     * 侵犯他人隐私权、名誉权等合法权益的内容。
   - 从事任何非法商业活动或通过本软件非法牟利。
   - 其他任何违反现行有效法律、行政法规、部门规章的活动。
5. 本软件按“现状”(AS IS)提供，不附带任何形式的明示或默示保证，包括但不限于对适销性、特定目的适用性、无侵权以及功能不中断或无错误的保证。
6. 用户必须独立承担因使用或无法使用本软件而导致的一切风险和后果，包括但不限于数据丢失、业务中断、财产损失，以及因此产生的任何直接、间接、偶然、特殊、惩戒性或后果性损害。
7. **使用本软件所产生的一切法律责任（包括民事、行政、刑事责任）和经济损失，均由用户本人独立承担。** 开发者在任何情况下均不承担任何形式的连带或间接责任。
8. 开发者保留在任何时候、无需通知的情况下，自行决定修改、暂停或终止本项目的权利。若发现本项目被滥用于非法目的，**开发者有权并将会立即删除整个项目仓库并停止一切技术支持。**
9. 本协议构成开发者与用户之间关于本软件使用的完整协议，取代任何先前的口头或书面沟通。
10. 若本协议中的任何条款被有管辖权的法院认定为无效、不合法或不可执行，该条款的无效不影响本协议其余条款的效力。

## 这个项目能做什么？
  
- 通过记录文件的Hash信息，利用123云盘的秒传机制模拟上传文件，从而实现跨账号传输文件的功能。
    
- 受益于此，本项目可以不受分享数量、文件大小、有效时间等因素的限制，分享各种资源。

## 核心功能

- 📄 支持分享单个文件、分享文件夹（批量分享）

- 🔗 支持生成 `短分享码`，无论分享多少文件，分享码都是那么短（站内可用）

- 🚀 支持生成 `长分享码` 或 `*.123share` 文件作为分享媒介（跨站可用）

- ☁️ 支持 [从私人网盘导出](#使用教程)（无需创建分享链接）

- 🔗 支持 [从分享链接导出](#使用教程)（兼容现有分享方式）

- 📦 提供 [公共资源库](docs/PUBLIC_SHARE.md)，收集目前各个渠道的分享资源

- 💫 支持 `*.123share` 与 `123FastLink` 文件格式相互转换

- 🎭 文件/文件夹 [ID 匿名化 [Issue #2]](https://github.com/realcwj/123Pan-Unlimited-Share/issues/2)，不暴露分享者的身份

- 🌍 支持 [资源共享计划](#资源共享计划)，您可以共享导出的文件，其他用户能够搜索并导入共享的资源

- 🌐 提供基于 `Flask` 的 [可视化界面（网页）](docs/WEB_TUTORIAL.md)，使用更方便

- 💻 提供基于 `Windows` 的 [本地一键部署 `exe` 程序](docs/LOCAL_DEPLOY.md)，使用更方便

- ⚡ 提供基于 `Flask` 的 [API 调用接口](docs/API_TUTORIAL.md)
  - 包括：
  - 公共资源库相关API（可对接Js脚本）
  - 导入导出操作API（可对接机器人）
  - 数据格式转换API（提高兼容性）

- 🚧 提供基于 `Python` 的 [调用脚本](docs/PYTHON_TUTORIAL.md)，可二次开发

- ✈️‌ 支持从 Telegram 的 [那个频道](#从哪个-telegram-频道爬取数据) 自动爬取有效的资源，导入到公共资源库

<!-- 恭喜你发现了彩蛋! 那个频道是：@xx123pan 感谢频道主的辛苦付出! -->

- 🥳 免费、完整、开源的代码，**本地部署更安全~**

## 目录

- [123云盘 无限制分享工具](#123云盘-无限制分享工具)
  - [使用协议与免责声明 (Terms of Use \& Disclaimer)](#使用协议与免责声明-terms-of-use--disclaimer)
  - [这个项目能做什么？](#这个项目能做什么)
  - [核心功能](#核心功能)
  - [目录](#目录)
  - [更新日志（自上而下、由新到旧）](#更新日志自上而下由新到旧)
  - [开发计划](#开发计划)
  - [如何使用？](#如何使用)
    - [【不反对】使用在线部署的可视化界面（网页）](#不反对使用在线部署的可视化界面网页)
      - [网页使用教程](#网页使用教程)
    - [【👍推荐】基于123FastLink修改的脚本（Tampermonkey脚本）](#推荐基于123fastlink修改的脚本tampermonkey脚本)
    - [【👍推荐】Windows端 本地一键部署可视化界面（网页）](#推荐windows端-本地一键部署可视化界面网页)
    - [【👍推荐】服务器部署可视化界面（网页）](#推荐服务器部署可视化界面网页)
    - [【二次开发】通过 Python 函数调用](#二次开发通过-python-函数调用)
    - [【二次开发】通过 API 接口调用](#二次开发通过-api-接口调用)
  - [资源共享计划（公共资源库）](#资源共享计划公共资源库)
    - [介绍](#介绍)
    - [“您本次分享的资源将审核后公开可见”是什么意思？](#您本次分享的资源将审核后公开可见是什么意思)
    - [公共资源库是什么？目前包含了哪些资源？](#公共资源库是什么目前包含了哪些资源)
  - [FAQ](#faq)
    - [如何获取 `homeFilePath` ?](#如何获取-homefilepath-)
    - [目前分享了哪些文件？](#目前分享了哪些文件)
    - [原理是啥？怎么实现的？](#原理是啥怎么实现的)
    - [是否会泄露我的隐私?](#是否会泄露我的隐私)
    - [是否有分享的文件大小/数量限制？](#是否有分享的文件大小数量限制)
    - [导入速度慢怎么办？未来会不会使用多线程上传提速？](#导入速度慢怎么办未来会不会使用多线程上传提速)
    - [分享的文件是否会过期？](#分享的文件是否会过期)
    - [提示登录失败怎么办？](#提示登录失败怎么办)
  - [Star History](#star-history)
  - [License](#license)

## 更新日志（自上而下、由新到旧）

- 支持勾选部分文件/文件夹导入

- 支持搜索到每个分享内的文件/文件名（⚠️破坏性更新：新版本不可用旧版本数据库，旧版本可用新版本数据库）

- 支持创建空资源库（使用方法：删除 `asset/PAN123DATABASE.db` 文件）

- 发布版本：[Release: v2-alpha](https://github.com/realcwj/123Pan-Unlimited-Share/releases/tag/v2-alpha)

- 更新基于 [123云盘秒传链接](https://greasyfork.org/zh-CN/scripts/536660-123%E4%BA%91%E7%9B%98%E7%A7%92%E4%BC%A0%E9%93%BE%E6%8E%A5) 二次修改的油猴脚本，加入 `公共资源库` 和 `资源共享计划` 功能

- 修复导入分享时，部分文件名包含特殊字符导致上传失败的Bug

- 新增 `*.123share` 与 `123FastLink` 文件格式相互转换的功能，对应增加格式转换API、公共资源库API

- 新增数据库去重功能，现在对所有导入的数据都会经过一遍匿名化操作，确保目录、文件结构完全相同的分享不会被重复加入数据库

- BAN IP 功能现在支持开关
  - 重要提示：
  - 建议本项目部署在具有中国大陆IP的服务器上，避免境外IP登录账号
  - 在服务器公网部署时，建议打开 BAN IP 开关，不对中国大陆IP用户提供服务，以符合中国大陆法律法规
  - 本地部署时，可以关闭 BAN_IP 功能。**⚠️ 强烈不建议对中国大陆IP用户提供服务，风险自负！**

- 优化后台管理界面UI设计、并在后台增加更新数据库按钮、查看目录树按钮

- 公共资源库增加页面功能，每页显示100条，避免用户侧加载卡顿

- 增加全局日志系统，增加日志文件配置，摈弃 `print()`

- 加入排队功能，避免因为多人使用导致服务器IP被封
  - 请务必在单IP的服务器上设置**单进程**运行
  - 线程数可以随意设置，例如：**进程数：1，线程数：12**

- 代码重构，现在会尽量均匀的在各个文件里拉屎，避免在 `web.py` 文件里叠草莓塔

- 发布版本：[Release: v1-alpha](https://github.com/realcwj/123Pan-Unlimited-Share/releases/tag/v1-alpha)

- 加入短分享码功能、加入公共资源库功能

- 初代版本发布

## 开发计划

- 【开发者】完善后台管理页面

- 【开发中】断点续传功能

- 欢迎提建议~

## 如何使用？

**⚠️重要提示：推荐本地部署，尽量避免使用他人搭建的网页，你永远不知道别人会不会在后台记录你的账号密码！**

### 【不反对】使用在线部署的可视化界面（网页）

- 已在 [>>> 这里 <<<](https://pan.whose.icu/) 搭建了一个网页版，供大家使用。

  **服务器很渣，大家轻点用，千万别给我上DDoS🥺**

  #### 网页使用教程

    - 请见 [>>> 123云盘无限制分享工具（Web界面使用教程） <<<](docs/WEB_TUTORIAL.md)

### 【👍推荐】基于123FastLink修改的脚本（Tampermonkey脚本）

- 请见 [>>> 123云盘无限制分享工具（Tampermonkey脚本文档） <<<](docs/TAMPERMONKEY_TUTORIAL.md)

### 【👍推荐】Windows端 本地一键部署可视化界面（网页）

- 请见 [>>> 123云盘无限制分享工具（本地部署文档） <<<](docs/LOCAL_DEPLOY.md)

### 【👍推荐】服务器部署可视化界面（网页）

- 请见 [>>> 123云盘无限制分享工具（服务器 `gunicorn` 部署教程） <<<](docs/WEB_DEPLOY.md)

### 【二次开发】通过 Python 函数调用

- 请见 [>>> 123云盘无限制分享工具（Python函数调用文档） <<<](docs/PYTHON_TUTORIAL.md)

### 【二次开发】通过 API 接口调用

- 请见 [>>> 123云盘无限制分享工具（API接口文档） <<<](docs/API_TUTORIAL.md)

## 资源共享计划（公共资源库）

### 介绍

- 资源共享计划是为了方便大家分享资源，提高资源的可用性。

- 您可以分享导出的文件，其他用户能够搜索并导入共享的资源。

- 您分享的文件必须是符合所在地的法律法规的。

### “您本次分享的资源将审核后公开可见”是什么意思？

- 意思就是怕有人乱写文件名，提一些敏感内容，把服务器给扬了。这里需要确保不被乱搞。

### 公共资源库是什么？目前包含了哪些资源？

- 请见 [>>> 123云盘无限制分享工具（公共资源库文档） <<<](docs/PUBLIC_SHARE.md)

## FAQ

### 如何获取 `homeFilePath` ?

1. 打开 123 云盘网页版

2. 打开你想分享的整个文件夹 (比如你要分享ABCD文件夹，那就点进去)

    这时候浏览器的网页链接应该是类似这样的：

   ```url
   https://www.123pan.com/?homeFilePath=12345678
   或者
   https://www.123pan.com/?homeFilePath=12345678,87654321
   或者
   https://www.123pan.com/?homeFilePath=12345678,...,87654321
   ```

3. 复制浏览器链接中的最后一部分数字

    如上面的两个链接所示, 分享的文件夹ID分别为 `12345678` 和 `87654321` 和 `87654321`

### 目前分享了哪些文件？

- 从 Telegram 的那个资源分享频道爬取可用的资源，导入到公共资源库中。

- 从互联网搜集的各分享链接导出的资源，详见：[>>> 123云盘无限制分享工具（公共资源库文档） <<<](docs/PUBLIC_SHARE.md)

### 原理是啥？怎么实现的？

**TL;DR**：在分享侧记录待分享文件的Hash；在接收侧使用同样的Hash模拟本地上传文件，上传时刚好命中服务器中已存在的文件，触发秒传。

- 本项目是利用123云盘的 **秒传** 功能实现的，具体而言：

1. 确保即将分享的资源已经上传到123云盘 (网盘已存在数据)

2. `export`/`link` 模式下, 程序会遍历指定文件夹内的所有内容，逐个获取每个文件的 Hash 值，使用 base64 加密后将其保存到 `*.123share` 文件中

3. `import` 模式下, 程序会读取 `*.123share` 文件中记录的文件数据，利用123云盘的秒传功能，将文件逐个上传到123云盘

4. 此时，你保存的这些文件属于“由你自己上传”的性质，不属于文件分享

### 是否会泄露我的隐私?

- 本项目不会泄露你的隐私，项目代码也已开源，供大家查看。

### 是否有分享的文件大小/数量限制？

- 无限制。实测单个大约 73G 的文件也可以分享。

### 导入速度慢怎么办？未来会不会使用多线程上传提速？

- 不能，123云盘的服务器有请求速率限制。未来会考虑加入多线程上传机制。

### 分享的文件是否会过期？

- 使用本项目分享的文件**理论上永不过期**。由于本项目的分享原理是记录文件的 Hash，因此，只要123云盘的服务器中存在源文件，分享将永久有效。

### 提示登录失败怎么办？

- 在部署的设备上，用浏览器进入 [123云盘网页](https://www.123pan.com) 登录账号，然后再尝试使用本工具。

- 如果还是不行，在该设备上修改一次密码，再尝试使用本工具。

- 如果还是不行，提 GitHub Issues。

## Star History

  [![Star History Chart](https://api.star-history.com/svg?repos=realcwj/123Pan-Unlimited-Share&type=Date)](https://www.star-history.com/#realcwj/123Pan-Unlimited-Share&Date)

## License

本项目使用 [GPLv3 License](LICENSE)。